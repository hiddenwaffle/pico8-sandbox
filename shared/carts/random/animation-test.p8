pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

g = { }

function _init()
  g.me = entity_type:new()
end

function _update60()
  local xacc = 0
  local yacc = 0
  if (btn(0)) xacc -= 1
  if (btn(1)) xacc += 1
  if (btn(2)) yacc -= 1
  if (btn(3)) yacc += 1
  g.me:update(xacc, yacc)
end

function _draw()
  cls()
  g.me:draw()
end

-->8

entity_type = { }

function entity_type:new()
  local o = {
    x = 0,
    y = 0,
    xvel = 0,
    yvel = 0,
    facing = 1 -- 0 == left, 1 == right
  }
  setmetatable(o, self)
  self.__index = self
  return o
end

function entity_type:update(xacc, yacc)
  self:update_position(xacc, yacc)
end

function entity_type:update_position(xacc, yacc)
  xacc = xacc or 0
  yacc = yacc or 0
  if (xacc < 0) self.facing = 0
  if (xacc > 0) self.facing = 1
  self.xvel += xacc
  self.yvel += yacc
  self.x += self.xvel
  self.y += self.yvel
  self.xvel *= 0.6
  self.yvel *= 0.6
  if (abs(self.xvel) < 0.1) self.xvel = 0
  if (abs(self.yvel) < 0.1) self.yvel = 0
end

function entity_type:draw()
  local flip = self.facing == 0
  spr(1, self.x, self.y, 2, 2, flip)
end

__gfx__
00000000000000000000000000000000000000000000000000006666666600000000000044000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000006777767776000000000000400000000000000000000000000b040b33000000000000000000000
007007000000000000056777777770000005677777777000000667767677600000000003b4300000000004999999000000000b4b3b0000000000000000000000
0007700000000000005677777777770000567777777777000006c6666666c0000000003bbbb30000000499999999900000000034000000000000000000000000
0007700000000000005677777777770000567777777777000006ccccccccc000000003bbbbbb3000004999999aa9990000028824288800000000000000000000
0070070000000000005677799779700000567777997790000006ccc777ccc00000003bbbbbbbb000049999999999999000288888888820000000000000000000
0000000000000000005677799779700000567777997790000006cc78887cc00000003bbbbbbbb000049999999999a99002888888888882000000000000000000
0000000000000000005677777777700000567777777770000006c7888777c00000003bbbbbbbb000049999999999999002888888888888000b8888888888888b
0000000000000000005677777777700000567777777770000006c78877d7c0000000b3bbbbbb3000049999999999999002888888888888000b8188888888818b
0000000000000000000567777777700000056777777777000006c787ddd7c0000003bbbbbbbbb300049999999999999002888888888888000b8888888888888b
0000000000000000005677777777770000567777777777700006cc7ddd7cc0000003bbbbbbbbbb00049999999999999002888888888880000b8881888881888b
0000000000000000005677777777777000567777777777700006ccc777ccc0000003bbbbbbbbbb00049999999999999000288888888880000b8888881888888b
0000000000000000005677777777777000567777777777700006ccccccccc0000003bbbbbbbbbb000049999999999900000288888888000003b88888888888b3
00000000000000000056777777777770005677777777770000056cccccccc0000003bbbbbbbbb30000049999999990000002888888880000003b888888888b30
0000000000000000000567777706770000567777777770000000566666660000000033bbbbbb3000000044999999000000002888888000000003bbbbbbbbb300
00000000000000000000567770056700005677700567000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000565000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000040000000000000000077000000000009000000000000000000000000000
00000000000000000000000000000000000000000000000000008282828280000004474000000000000567566576500000049400000000000000000000000000
0000000000000000000000000000000000000000000000000002eeeeeeeee200004b44000000000000567777777765000000b9bb000000000000000000000000
00000000000000000000000001cc00000000000000288000008ee7ee7ee7ee80044444000000000000000056760090a90000b000bb0000000000000000000000
0000000000000000000000001cccc0000000000b0288280000282eeeeeee828000444400000000000000005656000aaa0000b00000b000000000044069990000
0000000000000000000000001dccc000000000b03b288000008ee8282828ee800000444744474400000056aaaa769aa0000b0000000b00000770499474999900
00000000000000000001cc001cccc00000000300b0020000008eeeeeeeeeee800000474447444474000566aaaa776909000b0000000232000994799977499719
0000000000000000001cccc003cc0000000030000b000000008eaeeeeeeeae800000444744447444000566aaa777700000030000002887e00994694474999719
0000000000000000001dccc03b0000000002880000300000008eeeeeaeeeee80000044400044440400056776a777700000287e000288888e0497744464999999
0000000000000000001cccc0b00000000028828000288000078eeeeeeeeeee87000444400004440009056776aaaa7000028888e0028888880000499459994400
00000000000000000001ccb0b00000000002880002882800078eeeeeeeeeee8700040040000404000a0567776aaa700002888880002888800000070009900000
00000000000000000000003b00000000000020000028800007788eeeeeee887000400040000404000a0a56776aaa000002888880000228000000000009000000
000000000000000000000003b00000000000000000020000007778888888777000400040000400400aaaa56776a0000000288800000000000000000000000000
000000000000000000000000000000000000000000000000000077777777700000400040000400409a99a0000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000a009aaa0000000000000000000000000000000000000000
0000000000000000001cccc003cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000001dccc03b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000001cccc0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000001ccb0b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000003b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000003b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000001516000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
