pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

g = { }

function _init()
  g.me = entity_type:new()
end

function _update60()
  local xacc = 0
  local yacc = 0
  if (btn(0)) xacc -= 1
  if (btn(1)) xacc += 1
  if (btn(2)) yacc -= 1
  if (btn(3)) yacc += 1
  g.me:update(xacc, yacc)
end

function _draw()
  cls()
  g.me:draw()
end

-->8

entity_type = { }

function entity_type:new()
  local o = {
    x = 0,
    y = 0,
    xvel = 0,
    yvel = 0,
    facing = 1 -- 0 == left, 1 == right
  }
  setmetatable(o, self)
  self.__index = self
  return o
end

function entity_type:update(xacc, yacc)
  self:update_position(xacc, yacc)
end

function entity_type:update_position(xacc, yacc)
  xacc = xacc or 0
  yacc = yacc or 0
  if (xacc < 0) self.facing = 0
  if (xacc > 0) self.facing = 1
  self.xvel += xacc
  self.yvel += yacc
  self.x += self.xvel
  self.y += self.yvel
  self.xvel *= 0.6
  self.yvel *= 0.6
  if (abs(self.xvel) < 0.1) self.xvel = 0
  if (abs(self.yvel) < 0.1) self.yvel = 0
end

function entity_type:draw()
  local flip = self.facing == 0
  spr(1, self.x, self.y, 2, 2, flip)
end

__gfx__
00000000000000000000000000000000000000000000666666660000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000006777767776000000090000000000000000000000000000000b040b3300000000000000000000000000000
007007000005677777777000000567777777700000066776767760000004940000000000000004999999000000000b4b3b000000000000000000000000000000
00077000005677777777770000567777777777000006c6666666c0000000b9bb0000000000049999999990000000003400000000000000000000000000000000
00077000005677777777770000567777777777000006ccccccccc0000000b000bb000000004999999aa999000002882428880000000000000000000000000000
00700700005677799779700000567777997790000006ccc777ccc0000000b00000b0000004999999999999900028888888882000000000000000000000000000
00000000005677799779700000567777997790000006cc78887cc000000b0000000b0000049999999999a9900288888888888200000000000000000000000000
00000000005677777777700000567777777770000006c7888777c000000b000000023200049999999999999002888888888888000b8888888888888b00000000
00000000005677777777700000567777777770000006c78877d7c00000030000002887e0049999999999999002888888888888000b8188888888818b00000000
00000000000567777777700000056777777777000006c787ddd7c00000287e000288888e049999999999999002888888888888000b8888888888888b00000000
00000000005677777777770000567777777777700006cc7ddd7cc000028888e002888888049999999999999002888888888880000b8881888881888b00000000
00000000005677777777777000567777777777700006ccc777ccc0000288888000288880049999999999999000288888888880000b8888881888888b00000000
00000000005677777777777000567777777777700006ccccccccc00002888880000228000049999999999900000288888888000003b88888888888b300000000
000000000056777777777770005677777777770000056cccccccc000002888000000000000049999999990000002888888880000003b888888888b3000000000
000000000005677777067700005677777777700000005666666600000000000000000000000044999999000000002888888000000003bbbbbbbbb30000000000
00000000000056777005670000567770056700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000056500000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000004000000000000000007700000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000828282828000000447400000000000056756657650000000000000000000000000000000000000000000
00000000000000000000000000000000000000000002eeeeeeeee200004b44000000000000567777777765000000000000000000000000000000000000000000
000000000000000001cc00000000000000288000008ee7ee7ee7ee80044444000000000000000056760090a90000000000000000000000000000000000000000
00000000000000001cccc0000000000b0288280000282eeeeeee828000444400000000000000005656000aaa0000000000000000000004406999000000000000
00000000000000001dccc000000000b03b288000008ee8282828ee800000444744474400000056aaaa769aa00000000000000000077049947499990000000000
000000000001cc001cccc00000000300b0020000008eeeeeeeeeee800000474447444474000566aaaa7769090000000000000000099479997749971900000000
00000000001cccc003cc0000000030000b000000008eaeeeeeeeae800000444744447444000566aaa77770000000000000000000099469447499971900000000
00000000001dccc03b0000000002880000300000008eeeeeaeeeee80000044400044440400056776a77770000000000000000000049774446499999900000000
00000000001cccc0b00000000028828000288000078eeeeeeeeeee87000444400004440009056776aaaa70000000000000000000000049945999440000000000
000000000001ccb0b00000000002880002882800078eeeeeeeeeee8700040040000404000a0567776aaa70000000000000000000000007000990000000000000
000000000000003b00000000000020000028800007788eeeeeee887000400040000404000a0a56776aaa00000000000000000000000000000900000000000000
0000000000000003b00000000000000000020000007778888888777000400040000400400aaaa56776a000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000077777777700000400040000400409a99a000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000a009aaa000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000506000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000001516000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
